display: ":0"
xauthority: "~/.Xauthority"

global:
  labels:
    app: ska-jupyter-scripting
  minikube: false
  operator: true
  exposeAllDS: false
  taranta_auth_enabled: false
  # taranta_dashboard_enabled: false
  annotations:
    app.gitlab.com/app: ska-jupyter-scripting
    app.gitlab.com/env: ska-low
  sub-system:
    tango-base:
      enabled: false
    ska-tango-base:
      enabled: false
    ska-taranta:
      enabled: false
  retry:
    - "--sleep=1"
    - "--tries=100"
  tango_host: databaseds:10000
  device_server_port: 45450
  cluster_domain: techops.internal.skao.int
  data-product-pvc-name: shared
  dsconfig:
    timeout: 300s
    image:
      registry: artefact.skao.int
      image: ska-tango-images-tango-dsconfig
      tag: 1.5.1
      pullPolicy: IfNotPresent
  itango:
    image:
      registry: artefact.skao.int
      image: ska-tango-images-tango-itango
      tag: 9.3.5
      pullPolicy: IfNotPresent
  tango_example:
    image:
      registry: harbor.skao.int/production
      image: ska-tango-examples
      tag: 0.4.32
      pullPolicy: IfNotPresent

ska-tango-base:
  enabled: true
  vnc:
    replicas: 1
    enabled: true
  tangorest:
    replicas: 1
    enabled: true
    resources:
      requests:
        cpu: 100m # 100m = 0.1 CPU
        memory: 128Mi # 256Mi = 0.25 GB mem
        ephemeral-storage: 256Mi
      limits:
        cpu: 200m # 100m = 0.1 CPU
        memory: 768Mi # 256Mi = 0.25 GB mem
        ephemeral-storage: 256Mi
  tangotest:
    enabled: true
  ingress:
    enabled: true
    hostname: k8s.stfc.skao.int
  tangodb:
    use_pv: false

#=== OSO ===#    

#=== MCCS ===#
ska-low-mccs:
  enabled: true
  deviceServers:
    cabinetbanks:
      cabinetbank-cb-1:
        low-mccs/cabinetbank/cb-1-01:
          cabinetbank_id: 1
          stations:
          - low-mccs/station/ci-1
    controllers:
      controller:
        low-mccs/control/control:
          cabinetbanks:
          - low-mccs/cabinetbank/cb-1-01
          stationbeams:
          - low-mccs/beam/ci-1-01
          stations:
          - low-mccs/station/ci-1
          subarraybeams:
          - low-mccs/subarraybeam/01
          subarrays:
          - low-mccs/subarray/01
    stationbeams:
      stationbeams-ci-1:
        low-mccs/beam/ci-1-01:
          beam_id: 1
    stations:
      station-ci-1:
        low-mccs/station/ci-1:
          logging_level_default: 5
          ref_height: 1
          ref_latitude: -1
          ref_longitude: 1
          station_id: 1
    subarraybeams:
      subarraybeam-01:
        low-mccs/subarraybeam/01:
          logging_level_default: 5
    subarrays:
      subarray-01:
        low-mccs/subarray/01:
          logging_level_default: 5
          skuid_url: http://ska-ser-skuid-ska-ser-skuid-svc:9870/
          subarray_id: 1
    
    # stations:
    #     station-ci-1:
    #       low-mccs/station/ci-1:
    #         logging_level_default: 5
    #         station_calibrator_trl: low-mccs/calibrator/ci-1
    #         station_id: 1
    #         ref_latitude: -26.704078296
    #         ref_longitude: 116.670233065
    #         ref_height: 359.495
    #     station-ci-2:
    #       low-mccs/station/ci-2:
    #         logging_level_default: 5
    #         station_calibrator_trl: low-mccs/calibrator/ci-2
    #         station_id: 2
    #         ref_latitude: -26.714078296
    #         ref_longitude: 116.675233065
    #         ref_height: 358.495

  ska-low-mccs-pasd:
    enabled: true

  ska-low-mccs-spshw:
    enabled: true

    ska-low-mccs-daq:
      enabled: true

#=== CSP ===#

#=== LOW CBF ===#
ska-low-cbf:
    enabled: true
    minikube: true
    labels:
      app: ska-jupyter-scripting
    cbf:
      hardware_connections:
        # psi-perentie1
        - 'switch=p4_01  port=19/0  speed=100  alveo=XFL14SLO1LIF'
        - 'switch=p4_01  port=21/0  speed=100  alveo=XFL1DKXBEVG2'
        - 'switch=p4_01  port=23/0  speed=100  alveo=XFL1HOOQ1Y44'
        - 'switch=p4_01  port=25/0  speed=100  alveo=XFL1LHN4TXO2'

ska-low-cbf-tango-cnic:
  enabled: false

ska-low-cbf-proc:
  deviceServers:
    processor:
      instances: ["0", "1"] 
      resources:
        limits:
          amd.com/xilinx_u55c_gen3x16_xdma_base_3-0: 0  # no FPGA hardware
          memory: 512Mi  # reduced

#=== PST ===#
ska-pst:
  enabled: true
  ska-pst-core:
    enabled: false
    serviceAccount:
      create: false
    send:
      enabled: true
      dpdApiIntegration: true

  ska-pst-jupyterlab:
    enabled: false

  ska-pst-lmc:
    enabled: true
    beam:
      simulationMode: 1
      scanOutputDirPattern: /tmp/<eb_id>/<subsystem_id>/<scan_id>

    affinity:
      podAffinity:
        requiredDuringSchedulingIgnoredDuringExecution: []

  volume: null

#=== SDP ===#
ska-sdp:
  labels:
    app: ska-jupyter-scripting
  ska-tango-base:
    enabled: false
  lmc:
    prefix: low
    nsubarray: 3
  data-pvc:
    create:
      enabled: true
      size: 20Gi
      storageClassName: nfss1

#=== TMC LOW ===#
ska-tmc-low:
  enabled: true

## tmc-low
tmc-low:
  enabled: true
  legacy_compatibility: true
  telescope: SKA-low
  ska-tango-base:
    enabled: false
  deviceServers:
    mocks:
      enabled: false
      mccs: false
      csp: false
      sdp: false

#=== Taranta ===#
ska-tango-tangogql:
  enabled: true
  ska-tango-base:
    enabled: false